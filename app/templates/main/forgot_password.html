{% extends "base.html" %} {% block title %}Forgot Password - Papalyze{% endblock
%} {% block content %}
<div
  class="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800 py-12 px-4 sm:px-6 lg:px-8"
>
  <div
    class="w-full max-w-5xl flex flex-col lg:flex-row bg-white dark:bg-slate-800 shadow-2xl rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-700"
  >
    <!-- Left Side - Brand Panel -->
    <div
      class="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 to-blue-700 items-center justify-center p-12 relative overflow-hidden"
    >
      <!-- Background decoration -->
      <div class="absolute inset-0 bg-blue-600/10">
        <div
          class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-purple-600/20"
        ></div>
        <div
          class="absolute -top-4 -left-4 w-24 h-24 bg-white/10 rounded-full"
        ></div>
        <div
          class="absolute top-1/3 -right-8 w-32 h-32 bg-white/5 rounded-full"
        ></div>
        <div
          class="absolute bottom-8 left-8 w-16 h-16 bg-white/10 rounded-full"
        ></div>
      </div>

      <div class="relative z-10 text-white text-center space-y-6 max-w-md">
        <!-- Logo -->
        <div class="-mb-5">
          <img
            src="{{ url_for('static', filename='images/papalyze.svg') }}"
            alt="Papalyze Logo"
            class="h-50 mx-auto"
          />
        </div>

        <div class="space-y-4">
          <h1 class="text-3xl font-bold tracking-tight">Password Recovery</h1>
          <p class="text-lg text-blue-100 leading-relaxed">
            Secure password reset made simple. Enter your email address and
            we'll send you a secure link to create a new password.
          </p>
        </div>

        <div class="pt-6">
          <div class="flex items-center justify-center space-x-2 text-blue-100">
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
              ></path>
            </svg>
            <span class="text-sm font-medium">Secure & Encrypted</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Form Panel -->
    <div class="w-full lg:w-1/2 p-8 sm:p-12 lg:p-16">
      <!-- Mobile Logo -->
      <div class="lg:hidden relative h-0 flex justify-center mb-8">
        <img
          src="{{ url_for('static', filename='images/papalyze.svg') }}"
          alt="Papalyze Logo"
          class="absolute -top-10 h-40 z-10"
        />
      </div>

      <div class="max-w-md mx-auto pt-12 lg:pt-0">
        <!-- Header -->
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-3">
            Forgot Password?
          </h2>
          <p
            class="text-slate-600 dark:text-slate-300 text-base leading-relaxed"
          >
            No worries! Enter your email address below and we'll send you a link
            to reset your password.
          </p>
        </div>

        <!-- Form -->
        <form
          method="POST"
          action="{{ url_for('main.forgot_password') }}"
          class="space-y-6"
        >
          <div class="space-y-2">
            <label
              for="email"
              class="block text-sm font-semibold text-slate-700 dark:text-slate-200"
            >
              Email Address
            </label>
            <div class="relative">
              <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
              >
                <svg
                  class="h-5 w-5 text-slate-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"
                  ></path>
                </svg>
              </div>
              <input
                type="email"
                name="email"
                id="email"
                required
                class="w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:placeholder-slate-400 dark:text-white dark:focus:ring-blue-400 dark:focus:border-blue-400 transition-colors duration-200"
                placeholder="Enter your email address"
              />
            </div>
          </div>

          <button
            type="submit"
            class="w-full cursor-pointer py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-slate-800"
          >
            Send Reset Link
          </button>
        </form>

        {% if reset_url %}
        <!-- Modal Overlay -->
        <div
          id="resetModal"
          class="fixed inset-0 bg-white/20 dark:bg-black/20 backdrop-blur-md flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-300"
        >
          <!-- Modal Container -->
          <div
            class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full mx-4 transform scale-95 transition-transform duration-300"
            id="modalContent"
          >
            <!-- Modal Header -->
            <div
              class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700"
            >
              <h2 class="text-xl font-semibold text-slate-900 dark:text-white">
                Password Reset
              </h2>
              <button
                onclick="closeModal()"
                class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  ></path>
                </svg>
              </button>
            </div>

            <!-- Modal Body -->
            <div class="p-6">
              <div
                class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-700 rounded-xl p-6 shadow-sm"
              >
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0">
                    <svg
                      class="w-6 h-6 text-green-600 dark:text-green-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex-1 min-w-0">
                    <h3
                      class="text-sm font-semibold text-green-800 dark:text-green-200 mb-2"
                    >
                      Reset Link sended Successfully!
                    </h3>
                    <p class="text-sm text-green-700 dark:text-green-300 mb-4">
                      Click the link in your email to reset the password check
                      the junk email if the email is not found. This link will
                      expire in 1 hour for security.
                    </p>
                    <div
                      class="bg-white dark:bg-slate-800 rounded-lg p-4 border border-green-100 dark:border-green-700"
                    >
                      <div class="space-y-3">
                        <!-- Email Address -->
                        <div class="flex items-center justify-between">
                          <span
                            class="text-sm font-medium text-slate-700 dark:text-slate-300"
                            >Reset link sent to:</span
                          >
                          <a
                            href="mailto:{{ email }}"
                            class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium transition-colors duration-200"
                          >
                            {{ email }}
                          </a>
                        </div>
                      </div>
                    </div>

                    <div
                      class="mt-4 flex items-center text-xs text-green-600 dark:text-green-400"
                    >
                      <svg
                        class="w-4 h-4 mr-1"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                        ></path>
                      </svg>
                      <span>Secure link - use within 1 hour</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Modal Footer -->
            <div
              class="flex justify-end p-6 border-t border-slate-200 dark:border-slate-700"
            >
              <button
                onclick="closeModal()"
                class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors duration-200"
              >
                Close
              </button>
            </div>
          </div>
        </div>

        <script>
          // Show modal when page loads (if reset_url exists)
          document.addEventListener("DOMContentLoaded", function () {
            showModal();
          });

          function showModal() {
            const modal = document.getElementById("resetModal");
            const modalContent = document.getElementById("modalContent");

            modal.classList.remove("opacity-0", "pointer-events-none");
            modal.classList.add("opacity-100");

            setTimeout(() => {
              modalContent.classList.remove("scale-95");
              modalContent.classList.add("scale-100");
            }, 10);
          }

          function closeModal() {
            const modal = document.getElementById("resetModal");
            const modalContent = document.getElementById("modalContent");

            modalContent.classList.remove("scale-100");
            modalContent.classList.add("scale-95");

            setTimeout(() => {
              modal.classList.remove("opacity-100");
              modal.classList.add("opacity-0", "pointer-events-none");
            }, 200);
          }

          // Close modal when clicking outside
          document
            .getElementById("resetModal")
            .addEventListener("click", function (e) {
              if (e.target === this) {
                closeModal();
              }
            });

          // Close modal with Escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape") {
              closeModal();
            }
          });

          function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function () {
              // Change button text temporarily
              const button = event.target.closest("button");
              const originalText = button.innerHTML;
              button.innerHTML =
                '<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Copied!';
              button.classList.add("bg-green-100", "text-green-700");
              button.classList.remove("bg-blue-100", "text-blue-700");

              setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove("bg-green-100", "text-green-700");
                button.classList.add("bg-blue-100", "text-blue-700");
              }, 2000);
            });
          }
        </script>
        {% endif %}

        <!-- Footer Links -->
        <div class="mt-8 text-center">
          <div class="relative">
            <div class="absolute inset-0 flex items-center">
              <div
                class="w-full border-t border-slate-200 dark:border-slate-600"
              ></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span
                class="px-4 bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400"
              >
                Remember your password?
              </span>
            </div>
          </div>

          <div class="mt-4">
            <a
              href="{{ url_for('auth.login') }}"
              class="inline-flex items-center text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors duration-200"
            >
              <svg
                class="w-4 h-4 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 19l-7-7m0 0l7-7m-7 7h18"
                ></path>
              </svg>
              Back to Login
            </a>
          </div>
        </div>

        <!-- Help Section -->
        <div class="mt-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg">
          <div class="flex items-start space-x-3">
            <svg
              class="w-5 h-5 text-slate-400 mt-0.5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              ></path>
            </svg>
            <div>
              <h3 class="text-sm font-medium text-slate-900 dark:text-white">
                Need help?
              </h3>
              <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">
                Contact our support team if you continue to have trouble
                accessing your account.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
